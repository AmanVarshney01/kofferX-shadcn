figma.showUI(__html__);

// Calls to "parent.postMessage" from within the HTML page will trigger this
// callback. The callback will be passed the "pluginMessage" property of the
// posted message.

// const button = `<svg width="77" height="40" viewBox="0 0 77 40" fill="none" xmlns="http://www.w3.org/2000/svg">
// <rect width="77" height="40" rx="6" fill="#0F172A"/>
// <path d="M17.1186 25V14.8182H20.8473C21.5698 14.8182 22.1681 14.9375 22.642 15.1761C23.116 15.4115 23.4706 15.7313 23.706 16.1357C23.9413 16.5367 24.0589 16.9891 24.0589 17.4929C24.0589 17.9171 23.9811 18.2751 23.8253 18.5668C23.6695 18.8551 23.4607 19.0871 23.1989 19.2628C22.9403 19.4351 22.6553 19.5611 22.3438 19.6406V19.7401C22.6818 19.7566 23.0116 19.866 23.3331 20.0682C23.6579 20.267 23.9264 20.5504 24.1385 20.9183C24.3506 21.2862 24.4567 21.7337 24.4567 22.2607C24.4567 22.781 24.334 23.2483 24.0888 23.6626C23.8468 24.0736 23.4723 24.4001 22.9652 24.642C22.4581 24.8807 21.8101 25 21.0213 25H17.1186ZM18.6548 23.6825H20.8722C21.608 23.6825 22.1349 23.54 22.4531 23.255C22.7713 22.9699 22.9304 22.6136 22.9304 22.1861C22.9304 21.8646 22.8492 21.5696 22.6868 21.3011C22.5244 21.0327 22.2924 20.8189 21.9908 20.6598C21.6925 20.5007 21.3378 20.4212 20.9268 20.4212H18.6548V23.6825ZM18.6548 19.223H20.7131C21.0578 19.223 21.3677 19.1567 21.6428 19.0241C21.9212 18.8916 22.1416 18.706 22.304 18.4673C22.4697 18.2254 22.5526 17.9403 22.5526 17.6122C22.5526 17.1913 22.4051 16.8383 22.1101 16.5533C21.8151 16.2682 21.3627 16.1257 20.7528 16.1257H18.6548V19.223ZM30.9968 21.8331V17.3636H32.4883V25H31.0266V23.6776H30.9471C30.7714 24.0852 30.4897 24.425 30.1019 24.6967C29.7174 24.9652 29.2385 25.0994 28.6651 25.0994C28.1746 25.0994 27.7404 24.9917 27.3626 24.7763C26.988 24.5575 26.6931 24.2344 26.4776 23.8068C26.2655 23.3793 26.1594 22.8506 26.1594 22.2209V17.3636H27.646V22.0419C27.646 22.5623 27.7901 22.9766 28.0785 23.2848C28.3668 23.593 28.7414 23.7472 29.2021 23.7472C29.4805 23.7472 29.7572 23.6776 30.0323 23.5384C30.3107 23.3991 30.5411 23.1887 30.7234 22.907C30.909 22.6252 31.0001 22.2673 30.9968 21.8331ZM38.0502 17.3636V18.5568H33.8791V17.3636H38.0502ZM34.9977 15.5341H36.4842V22.7578C36.4842 23.0462 36.5273 23.2633 36.6135 23.4091C36.6996 23.5516 36.8107 23.6494 36.9466 23.7024C37.0858 23.7521 37.2366 23.777 37.399 23.777C37.5183 23.777 37.6227 23.7687 37.7122 23.7521C37.8017 23.7356 37.8713 23.7223 37.921 23.7124L38.1895 24.9403C38.1033 24.9735 37.9806 25.0066 37.8216 25.0398C37.6625 25.0762 37.4636 25.0961 37.225 25.0994C36.8339 25.1061 36.4693 25.0365 36.1312 24.8906C35.7931 24.7448 35.5197 24.5194 35.3109 24.2145C35.1021 23.9096 34.9977 23.5268 34.9977 23.0661V15.5341ZM43.2592 17.3636V18.5568H39.0881V17.3636H43.2592ZM40.2067 15.5341H41.6932V22.7578C41.6932 23.0462 41.7363 23.2633 41.8224 23.4091C41.9086 23.5516 42.0196 23.6494 42.1555 23.7024C42.2947 23.7521 42.4455 23.777 42.608 23.777C42.7273 23.777 42.8317 23.7687 42.9212 23.7521C43.0107 23.7356 43.0803 23.7223 43.13 23.7124L43.3984 24.9403C43.3123 24.9735 43.1896 25.0066 43.0305 25.0398C42.8714 25.0762 42.6726 25.0961 42.4339 25.0994C42.0429 25.1061 41.6783 25.0365 41.3402 24.8906C41.0021 24.7448 40.7287 24.5194 40.5199 24.2145C40.3111 23.9096 40.2067 23.5268 40.2067 23.0661V15.5341ZM48.0382 25.1541C47.3223 25.1541 46.6975 24.9901 46.1639 24.6619C45.6303 24.3338 45.216 23.8748 44.921 23.2848C44.626 22.6948 44.4785 22.0054 44.4785 21.2166C44.4785 20.4245 44.626 19.7318 44.921 19.1385C45.216 18.5452 45.6303 18.0845 46.1639 17.7564C46.6975 17.4283 47.3223 17.2642 48.0382 17.2642C48.7541 17.2642 49.3788 17.4283 49.9125 17.7564C50.4461 18.0845 50.8604 18.5452 51.1554 19.1385C51.4503 19.7318 51.5978 20.4245 51.5978 21.2166C51.5978 22.0054 51.4503 22.6948 51.1554 23.2848C50.8604 23.8748 50.4461 24.3338 49.9125 24.6619C49.3788 24.9901 48.7541 25.1541 48.0382 25.1541ZM48.0431 23.9062C48.5072 23.9062 48.8916 23.7836 49.1966 23.5384C49.5015 23.2931 49.7269 22.9666 49.8727 22.5589C50.0218 22.1513 50.0964 21.7022 50.0964 21.2116C50.0964 20.7244 50.0218 20.277 49.8727 19.8693C49.7269 19.4583 49.5015 19.1286 49.1966 18.88C48.8916 18.6314 48.5072 18.5071 48.0431 18.5071C47.5758 18.5071 47.188 18.6314 46.8798 18.88C46.5749 19.1286 46.3478 19.4583 46.1987 19.8693C46.0529 20.277 45.9799 20.7244 45.9799 21.2116C45.9799 21.7022 46.0529 22.1513 46.1987 22.5589C46.3478 22.9666 46.5749 23.2931 46.8798 23.5384C47.188 23.7836 47.5758 23.9062 48.0431 23.9062ZM54.7436 20.4659V25H53.2571V17.3636H54.6839V18.6065H54.7784C54.9541 18.2022 55.2292 17.8774 55.6037 17.6321C55.9815 17.3868 56.4571 17.2642 57.0305 17.2642C57.5509 17.2642 58.0066 17.3736 58.3977 17.5923C58.7888 17.8078 59.0921 18.1293 59.3075 18.5568C59.523 18.9844 59.6307 19.513 59.6307 20.1428V25H58.1442V20.3217C58.1442 19.7682 58 19.3357 57.7116 19.0241C57.4233 18.7093 57.0272 18.5518 56.5234 18.5518C56.1787 18.5518 55.8722 18.6264 55.6037 18.7756C55.3385 18.9247 55.1281 19.1435 54.9723 19.4318C54.8198 19.7169 54.7436 20.0616 54.7436 20.4659Z" fill="white"/>
// </svg>`

figma.ui.onmessage = (msg: { type: string; count: number }) => {
  const nodes: SceneNode[] = [];
  if (msg.type === "create-rectangles") {
    for (let i = 0; i < msg.count; i++) {
      const rect = figma.createRectangle();
      rect.x = i * 150;
      rect.fills = [{ type: "SOLID", color: { r: 1, g: 0.5, b: 0 } }];
      figma.currentPage.appendChild(rect);
      nodes.push(rect);
    }
    figma.currentPage.selection = nodes;
    figma.viewport.scrollAndZoomIntoView(nodes);
  }

  figma.closePlugin();
};
